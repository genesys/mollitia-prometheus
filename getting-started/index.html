<!doctype html>
<html data-n-head-ssr lang="en" data-n-head="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Prometheus - Getting Started</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" data-hid="charset" charset="utf-8"><meta data-n-head="ssr" data-hid="mobile-web-app-capable" name="mobile-web-app-capable" content="yes"><meta data-n-head="ssr" data-hid="apple-mobile-web-app-title" name="apple-mobile-web-app-title" content="mollitia-prometheus-docs"><meta data-n-head="ssr" data-hid="og:type" name="og:type" property="og:type" content="website"><meta data-n-head="ssr" data-hid="og:title" name="og:title" property="og:title" content="mollitia-prometheus-docs"><meta data-n-head="ssr" data-hid="og:site_name" name="og:site_name" property="og:site_name" content="mollitia-prometheus-docs"><meta data-n-head="ssr" data-hid="description" name="description" content="Prometheus Mollitia Addon"><base href="/mollitia-prometheus/"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/mollitia-prometheus/favicon.ico"><link data-n-head="ssr" rel="stylesheet" type="text/css" href="/mollitia-prometheus/roboto/font.css"><link data-n-head="ssr" rel="stylesheet" type="text/css" href="/mollitia-prometheus/material-icons/font.css"><link data-n-head="ssr" data-hid="shortcut-icon" rel="shortcut icon" href="/mollitia-prometheus/_nuxt/icons/icon_64x64.5f6a36.png"><link data-n-head="ssr" data-hid="apple-touch-icon" rel="apple-touch-icon" href="/mollitia-prometheus/_nuxt/icons/icon_512x512.5f6a36.png" sizes="512x512"><link data-n-head="ssr" rel="manifest" href="/mollitia-prometheus/_nuxt/manifest.492052a2.json" data-hid="manifest"><link rel="preload" href="./_nuxt/e8d5312.js" as="script"><link rel="preload" href="./_nuxt/8befb4b.js" as="script"><link rel="preload" href="./_nuxt/f95f6c2.js" as="script"><link rel="preload" href="./_nuxt/642032a.js" as="script"><link rel="preload" href="./_nuxt/741afaf.js" as="script"><style data-vue-ssr-id="62108049:0 fa7ff0ca:0 5c346d62:0 d2a5dad2:0">code[class*=language-],pre[class*=language-]{color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo,Monaco,Consolas,"Andale Mono","Ubuntu Mono","Courier New",monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection{text-shadow:none;background:#75a7ca}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{text-shadow:none;background:#75a7ca}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e}:not(pre)>code[class*=language-]{padding:.1em .3em;border-radius:.3em;color:#db4c69;background:#f9f2f4}.namespace{opacity:.7}.token.doctype .token.doctype-tag{color:#569cd6}.token.doctype .token.name{color:#9cdcfe}.token.comment,.token.prolog{color:#6a9955}.language-html .language-css .token.punctuation,.language-html .language-javascript .token.punctuation,.token.punctuation{color:#d4d4d4}.token.boolean,.token.constant,.token.inserted,.token.number,.token.property,.token.symbol,.token.tag,.token.unit{color:#b5cea8}.token.attr-name,.token.builtin,.token.char,.token.deleted,.token.selector,.token.string{color:#ce9178}.language-css .token.string.url{text-decoration:underline}.token.entity,.token.operator{color:#d4d4d4}.token.operator.arrow{color:#569cd6}.token.atrule{color:#ce9178}.token.atrule .token.rule{color:#c586c0}.token.atrule .token.url{color:#9cdcfe}.token.atrule .token.url .token.function{color:#dcdcaa}.token.atrule .token.url .token.punctuation{color:#d4d4d4}.token.keyword{color:#569cd6}.token.keyword.control-flow,.token.keyword.module{color:#c586c0}.token.function,.token.function .token.maybe-class-name{color:#dcdcaa}.token.regex{color:#d16969}.token.important{color:#569cd6}.token.italic{font-style:italic}.token.constant{color:#9cdcfe}.token.class-name,.token.maybe-class-name{color:#4ec9b0}.token.console,.token.interpolation,.token.parameter{color:#9cdcfe}.token.boolean,.token.punctuation.interpolation-punctuation{color:#569cd6}.token.exports .token.maybe-class-name,.token.imports .token.maybe-class-name,.token.property,.token.variable{color:#9cdcfe}.token.escape,.token.selector{color:#d7ba7d}.token.tag{color:#569cd6}.token.cdata,.token.tag .token.punctuation{color:grey}.token.attr-name{color:#9cdcfe}.token.attr-value,.token.attr-value .token.punctuation{color:#ce9178}.token.attr-value .token.punctuation.attr-equals{color:#d4d4d4}.token.entity{color:#569cd6}.token.namespace{color:#4ec9b0}code[class*=language-javascript],code[class*=language-jsx],code[class*=language-tsx],code[class*=language-typescript],pre[class*=language-javascript],pre[class*=language-jsx],pre[class*=language-tsx],pre[class*=language-typescript]{color:#9cdcfe}code[class*=language-css],pre[class*=language-css]{color:#ce9178}code[class*=language-html],pre[class*=language-html]{color:#d4d4d4}.language-regex .token.anchor{color:#dcdcaa}.language-html .token.punctuation{color:grey}pre[data-line]{position:relative}pre[class*=language-]>code[class*=language-]{position:relative;z-index:1}.line-highlight{position:absolute;left:0;right:0;padding:inherit 0;margin-top:1em;background:#f7ebc6;box-shadow:inset 5px 0 0 #f7d87c;z-index:0;pointer-events:none;line-height:inherit;white-space:pre}.nuxt-progress{position:fixed;top:0;left:0;right:0;height:2px;width:0;opacity:1;transition:width .1s,opacity .4s;background-color:#000;z-index:999999}.nuxt-progress.nuxt-progress-notransition{transition:none}.nuxt-progress-failed{background-color:red}:root{--madoc-white:#fff;--madoc-black:#000;--madoc-light-orange:#ff4f1f;--madoc-dark-orange:#e36209;--madoc-grey-1:#111;--madoc-grey-2:#222;--madoc-grey-3:#333;--madoc-grey-4:#444;--madoc-grey-5:#555;--madoc-grey-9:#999;--madoc-light-primary:#aaa;--madoc-dark-primary:#444;--madoc-github-blue-link:#0366d6;--madoc-github-red-code:#af6161;--madoc-github-code-back:rgba(27,31,35,0.05);--madoc-github-underline:#eaecef;--madoc-github-grey-1:#eaeeef;--madoc-github-grey-2:#6a737d;--madoc-github-grey-3:#dfe2e5;--madoc-github-grey-4:#e1e4e8;--madoc-github-grey-5:#c6cbd1;--madoc-github-grey-6:#24292e;--madoc-github-grey-7:#d6d3d5;--madoc-github-grey-8:#d6d8da;--madoc-github-grey-9:#9da5b4;--madoc-github-grey-10:#181a1f;--madoc-github-grey-11:#1b1d23;--madoc-github-grey-12:#f6f8fa;--madoc-white-opacity-50:hsla(0,0%,100%,0.5);--madoc-black-opacity-25:rgba(0,0,0,0.25);--madoc-black-opacity-50:rgba(0,0,0,0.5);--madoc-grey-blue-1:#dce5ed;--madoc-grey-blue-2:#8da9c4;--madoc-grey-blue-3:#778da9;--madoc-blue-1:#00a6ed;--mollitia-error-color:#ea4f6b;--mollitia-warning-color:#f8a740;--mollitia-success-color:#4ac764;--mollitia-info-color:#2e69db;--mollitia-event-color:#ff8fdd}a{color:var(--madoc-anchor-link-color);text-decoration:none}a:hover{text-decoration:underline}h1{font-size:2em}h1,h2{padding-bottom:.3em;border-bottom:1px solid #555;border-bottom:1px solid var(--madoc-grey-5)}h2{font-size:1.5em}h3{font-size:1.25em}h4{font-size:1em}h5{font-size:.875em}h6{font-size:.85em}b,strong{font-weight:600}blockquote{padding:0 1em;border-left:.25em solid #181a1f;border-left:.25em solid var(--madoc-github-grey-10)}hr{height:.25em;padding:0;margin:24px 0;background-color:#181a1f;background-color:var(--madoc-github-grey-10);border:0}p>code,table code{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;padding:.2em .4em;margin:0;font-size:85%;background-color:#1b1d23;background-color:var(--madoc-github-grey-11);color:#af6161;color:var(--madoc-github-red-code);border-radius:3px}table{width:100%;border-spacing:0;border-collapse:collapse}table tr{background-color:#222;background-color:var(--madoc-grey-2);border-top:1px solid #181a1f;border-top:1px solid var(--madoc-github-grey-10)}table tr:nth-child(2n){background-color:var(--madoc-vscode-grey-3)}table tr>td,table tr>th{padding:6px 13px;border:1px solid #181a1f;border:1px solid var(--madoc-github-grey-10)}html{font-family:Roboto;background-color:#24292e;background-color:var(--madoc-github-grey-6);color:#fff;color:var(--madoc-white);overflow-x:hidden}body,html{height:100%}body{margin:0}body>div#__nuxt,body>div#__nuxt>div#__layout,body>div#__nuxt>div#__layout>div#app{height:100%}body>div#__nuxt>div#__layout>div#app>div.madoc-page{display:flex;flex-direction:column;height:100%}body>div#__nuxt>div#__layout>div#app>div.madoc-page>div.madoc-container{flex-grow:1;display:flex;flex-direction:row;overflow:hidden}body>div#__nuxt>div#__layout>div#app>div.madoc-page>div.madoc-container>div.madoc-wrapper{flex-grow:1;overflow:auto}body>div#__nuxt>div#__layout>div#app>div.madoc-page>div.madoc-container>div.madoc-wrapper>div.madoc-content{margin:0 auto 50px;max-width:60%;min-width:800px}[data-v-94c814a0]:root{--madoc-white:#fff;--madoc-black:#000;--madoc-light-orange:#ff4f1f;--madoc-dark-orange:#e36209;--madoc-grey-1:#111;--madoc-grey-2:#222;--madoc-grey-3:#333;--madoc-grey-4:#444;--madoc-grey-5:#555;--madoc-grey-9:#999;--madoc-light-primary:#aaa;--madoc-dark-primary:#444;--madoc-github-blue-link:#0366d6;--madoc-github-red-code:#af6161;--madoc-github-code-back:rgba(27,31,35,0.05);--madoc-github-underline:#eaecef;--madoc-github-grey-1:#eaeeef;--madoc-github-grey-2:#6a737d;--madoc-github-grey-3:#dfe2e5;--madoc-github-grey-4:#e1e4e8;--madoc-github-grey-5:#c6cbd1;--madoc-github-grey-6:#24292e;--madoc-github-grey-7:#d6d3d5;--madoc-github-grey-8:#d6d8da;--madoc-github-grey-9:#9da5b4;--madoc-github-grey-10:#181a1f;--madoc-github-grey-11:#1b1d23;--madoc-github-grey-12:#f6f8fa;--madoc-white-opacity-50:hsla(0,0%,100%,0.5);--madoc-black-opacity-25:rgba(0,0,0,0.25);--madoc-black-opacity-50:rgba(0,0,0,0.5);--madoc-grey-blue-1:#dce5ed;--madoc-grey-blue-2:#8da9c4;--madoc-grey-blue-3:#778da9;--madoc-blue-1:#00a6ed;--mollitia-error-color:#ea4f6b;--mollitia-warning-color:#f8a740;--mollitia-success-color:#4ac764;--mollitia-info-color:#2e69db;--mollitia-event-color:#ff8fdd}a[data-v-94c814a0]{color:var(--madoc-anchor-link-color);text-decoration:none}a[data-v-94c814a0]:hover{text-decoration:underline}h1[data-v-94c814a0]{font-size:2em}h1[data-v-94c814a0],h2[data-v-94c814a0]{padding-bottom:.3em;border-bottom:1px solid #555;border-bottom:1px solid var(--madoc-grey-5)}h2[data-v-94c814a0]{font-size:1.5em}h3[data-v-94c814a0]{font-size:1.25em}h4[data-v-94c814a0]{font-size:1em}h5[data-v-94c814a0]{font-size:.875em}h6[data-v-94c814a0]{font-size:.85em}b[data-v-94c814a0],strong[data-v-94c814a0]{font-weight:600}blockquote[data-v-94c814a0]{padding:0 1em;border-left:.25em solid #181a1f;border-left:.25em solid var(--madoc-github-grey-10)}hr[data-v-94c814a0]{height:.25em;padding:0;margin:24px 0;background-color:#181a1f;background-color:var(--madoc-github-grey-10);border:0}p>code[data-v-94c814a0],table code[data-v-94c814a0]{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;padding:.2em .4em;margin:0;font-size:85%;background-color:#1b1d23;background-color:var(--madoc-github-grey-11);color:#af6161;color:var(--madoc-github-red-code);border-radius:3px}table[data-v-94c814a0]{width:100%;border-spacing:0;border-collapse:collapse}table tr[data-v-94c814a0]{background-color:#222;background-color:var(--madoc-grey-2);border-top:1px solid #181a1f;border-top:1px solid var(--madoc-github-grey-10)}table tr[data-v-94c814a0]:nth-child(2n){background-color:var(--madoc-vscode-grey-3)}table tr>td[data-v-94c814a0],table tr>th[data-v-94c814a0]{padding:6px 13px;border:1px solid #181a1f;border:1px solid var(--madoc-github-grey-10)}nav.madoc-sidebar[data-v-94c814a0]{padding:20px 0;min-width:250px;border-right:1px solid #555;border-right:1px solid var(--madoc-grey-5);overflow:auto}nav.madoc-sidebar>span.madoc-sidebar-title[data-v-94c814a0]{display:block;font-weight:700;padding:0 1em}nav.madoc-sidebar>ul.madoc-sidebar-list[data-v-94c814a0]{margin:0;padding:0 1em;list-style:none}nav.madoc-sidebar>ul.madoc-sidebar-list[data-v-94c814a0]:first-child{padding-top:1em}nav.madoc-sidebar>ul.madoc-sidebar-list[data-v-94c814a0]:not(:last-child){padding-bottom:1em}nav.madoc-sidebar>ul.madoc-sidebar-list>li.madoc-sidebar-list-item[data-v-94c814a0]{border-left:1px solid #555;border-left:1px solid var(--madoc-grey-5)}nav.madoc-sidebar>ul.madoc-sidebar-list>li.madoc-sidebar-list-item[data-v-94c814a0]:last-child{border-bottom:1px solid #555;border-bottom:1px solid var(--madoc-grey-5)}nav.madoc-sidebar>ul.madoc-sidebar-list>li.madoc-sidebar-list-item>a[data-v-94c814a0]{border-top:1px solid #555;border-top:1px solid var(--madoc-grey-5);border-left:2px solid transparent;border-right:1px solid #555;border-right:1px solid var(--madoc-grey-5);display:block;padding:1em;color:inherit;text-decoration:none}nav.madoc-sidebar>ul.madoc-sidebar-list>li.madoc-sidebar-list-item>a.nuxt-link-exact-active[data-v-94c814a0]{border-left:2px solid #e36209;border-left:2px solid var(--madoc-dark-orange)}</style><link rel="preload" href="./_nuxt/static/1618306667/getting-started/state.js" as="script"><link rel="preload" href="./_nuxt/static/1618306667/getting-started/payload.js" as="script"><link rel="preload" href="./_nuxt/static/1618306667/manifest.js" as="script">
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div id="app"><div class="madoc-page"><!----> <div class="madoc-container"><nav class="madoc-sidebar" data-v-94c814a0><!----> <ul class="madoc-sidebar-list" data-v-94c814a0><li class="madoc-sidebar-list-item" data-v-94c814a0><a href="/mollitia-prometheus/" class="nuxt-link-active" data-v-94c814a0>
          Home
        </a></li><li class="madoc-sidebar-list-item" data-v-94c814a0><a href="/mollitia-prometheus/getting-started" aria-current="page" class="nuxt-link-exact-active nuxt-link-active" data-v-94c814a0>
          Getting Started
        </a></li><li class="madoc-sidebar-list-item" data-v-94c814a0><a href="/mollitia-prometheus/circuit" data-v-94c814a0>
          The Circuit
        </a></li></ul><span class="madoc-sidebar-title" data-v-94c814a0>Module Metrics</span> <ul class="madoc-sidebar-list" data-v-94c814a0><li class="madoc-sidebar-list-item" data-v-94c814a0><a href="/mollitia-prometheus/module/fallback" data-v-94c814a0>
          Fallback
        </a></li><li class="madoc-sidebar-list-item" data-v-94c814a0><a href="/mollitia-prometheus/module/cache" data-v-94c814a0>
          Cache
        </a></li><li class="madoc-sidebar-list-item" data-v-94c814a0><a href="/mollitia-prometheus/module/retry" data-v-94c814a0>
          Retry
        </a></li><li class="madoc-sidebar-list-item" data-v-94c814a0><a href="/mollitia-prometheus/module/timeout" data-v-94c814a0>
          Timeout
        </a></li><li class="madoc-sidebar-list-item" data-v-94c814a0><a href="/mollitia-prometheus/module/rate-limit" data-v-94c814a0>
          Ratelimit
        </a></li><li class="madoc-sidebar-list-item" data-v-94c814a0><a href="/mollitia-prometheus/module/bulkhead" data-v-94c814a0>
          Bulkhead
        </a></li><li class="madoc-sidebar-list-item" data-v-94c814a0><a href="/mollitia-prometheus/module/breaker/sliding/count" data-v-94c814a0>
          Count Breaker
        </a></li><li class="madoc-sidebar-list-item" data-v-94c814a0><a href="/mollitia-prometheus/module/breaker/sliding/time" data-v-94c814a0>
          Time Breaker
        </a></li></ul></nav> <div class="madoc-wrapper"><div class="madoc-content"><div class="nuxt-content"><h1 id="getting-started"><a aria-hidden="true" href="#getting-started" tabindex="-1"><span class="icon icon-link"></span></a>Getting Started</h1>
<p>Install and add the addon to <code>Mollitia</code> in your application.</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-bash"><code><span class="token comment"># Install mollitia</span>
<span class="token function">npm</span> <span class="token function">install</span> mollitia --save
<span class="token comment"># Install the prometheus addon</span>
<span class="token function">npm</span> <span class="token function">install</span> @mollitia/prometheus --save
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-javascript"><code><span class="token comment">// Javascript</span>
<span class="token keyword">const</span> <span class="token maybe-class-name">Mollitia</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mollitia'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token maybe-class-name">PrometheusAddon</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@mollitia/prometheus'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token maybe-class-name">Mollitia</span><span class="token punctuation">.</span><span class="token method function property-access">use</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">PrometheusAddon</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>Then, add <code>Prometheus</code> options when creating circuits or modules:</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-javascript"><code><span class="token keyword">const</span> myModule <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Mollitia<span class="token punctuation">.</span>Timeout</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  options<span class="token operator">:</span> <span class="token punctuation">{</span>
    prometheus<span class="token operator">:</span> <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">'my-module'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> myCircuit <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Mollitia<span class="token punctuation">.</span>Circuit</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  options<span class="token operator">:</span> <span class="token punctuation">{</span>
    prometheus<span class="token operator">:</span> <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">'my-circuit'</span><span class="token punctuation">,</span>
      labels<span class="token operator">:</span> <span class="token punctuation">{</span>
        tag2<span class="token operator">:</span> <span class="token string">'val2'</span><span class="token punctuation">,</span>
        tag3<span class="token operator">:</span> <span class="token string">'val3'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>Finally, you can get <code>Prometheus</code> metrics or scrap like this:</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-javascript"><code><span class="token keyword">const</span> metrics <span class="token operator">=</span> <span class="token maybe-class-name">Mollitia</span><span class="token punctuation">.</span><span class="token method function property-access">metrics</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Will return an object containing all metrics from all circuits and modules</span>
<span class="token keyword">const</span> scrap <span class="token operator">=</span> <span class="token maybe-class-name">Mollitia</span><span class="token punctuation">.</span><span class="token method function property-access">scrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Will return the Prometheus scrap, find an example below</span>
</code></pre></div>
</div></div></div></div></div></div></div></div><script defer src="./_nuxt/static/1618306667/getting-started/state.js"></script><script src="./_nuxt/e8d5312.js" defer></script><script src="./_nuxt/741afaf.js" defer></script><script src="./_nuxt/8befb4b.js" defer></script><script src="./_nuxt/f95f6c2.js" defer></script><script src="./_nuxt/642032a.js" defer></script>
  </body>
</html>
